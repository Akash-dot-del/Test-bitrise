format_version: '11'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

workflows:
  default:
    steps:
      - script: # Setup Python and run soul.py
          title: Run Python Script
          inputs:
            - content: | 
                #!/bin/bash
                echo "Installing Python..."
                brew install python3 || echo "Python is already installed."

                echo "Python Version:"
                python3 --version

                echo "Installing Dependencies (if any)..."
                if [ -f "$BITRISE_SOURCE_DIR/requirements.txt" ]; then
                  python3 -m pip install -r "$BITRISE_SOURCE_DIR/requirements.txt"
                else
                  echo "No requirements.txt found, skipping dependency installation."
                fi

                echo "Running soul.py..."
                python3  /bitrise/src/Test-bitrise/soul.py
